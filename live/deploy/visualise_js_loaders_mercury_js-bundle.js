"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunknddem"] = self["webpackChunknddem"] || []).push([["visualise_js_loaders_mercury_js"],{

/***/ "./visualise/js/loaders/mercury.js":
/*!*****************************************!*\
  !*** ./visualise/js/loaders/mercury.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"load_current_orientation\": () => (/* binding */ load_current_orientation),\n/* harmony export */   \"load_current_spheres\": () => (/* binding */ load_current_spheres),\n/* harmony export */   \"load_initial_spheres\": () => (/* binding */ load_initial_spheres),\n/* harmony export */   \"load_world\": () => (/* binding */ load_world)\n/* harmony export */ });\n/* harmony import */ var _node_modules_three_build_three_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/three/build/three.module.js */ \"./visualise/node_modules/three/build/three.module.js\");\n\n\nvar all_locs;\n\nasync function load_world(params, time, world) {\n  if (params.fname.substr(-1) === \"/\") {\n    var fname = params.fname.slice(0, -1);\n  } // remove trailing slash (which we just added) ; //\n  if (params.cache) {\n    var filename = params.data_dir + \"Samples/\" + fname;\n  } else {\n    var filename =\n      params.data_dir + \"Samples/\" + fname + \"?_=\" + new Date().getTime();\n  }\n  let promise = new Promise(function (resolve, reject) {\n    Papa.parse(filename, {\n      download: true,\n      dynamicTyping: true,\n      header: false,\n      preview: 1, // just load one line!\n      complete: function (results) {\n        params.N = 3; // HACK: ASSUMED!!!\n        var first_row = results.data[0][0].split(\" \");\n        // console.log(first_row);\n        params.num_particles = parseInt(first_row[0]);\n        // console.log(params.num_particles);\n        world.push({});\n        world[0].min = parseFloat(first_row[2]);\n        world[0].max = parseFloat(first_row[5]);\n        world[0].cur = (world[0].min + world[0].max) / 2;\n        world[0].prev = world[0].cur;\n        world.push({});\n        world[1].min = parseFloat(first_row[3]);\n        world[1].max = parseFloat(first_row[6]);\n        world[1].cur = (world[1].min + world[1].max) / 2;\n        world[1].prev = world[1].cur;\n        world.push({});\n        world[2].min = parseFloat(first_row[4]);\n        world[2].max = parseFloat(first_row[7]);\n        world[2].cur = (world[2].min + world[2].max) / 2;\n        world[2].prev = world[2].cur;\n\n        // HACK: STILL NOT FINDING TIME STEP OR NUMBER OF TIME STEPS!!!!\n        time.frames_per_second = 1;\n\n        resolve([params, time, world]);\n      },\n    });\n  });\n  var output = await promise.then(function (result) {\n    return result;\n  });\n  return output;\n}\n\nasync function load_initial_spheres(params, time) {\n  let promise = new Promise(function (resolve, reject) {\n    var request = new XMLHttpRequest();\n    if (params.fname.substr(-1) === \"/\") {\n      var fname = params.fname.slice(0, -1);\n    } // remove trailing slash (which we just added) ; //\n    if (params.cache) {\n      var filename = params.data_dir + \"Samples/\" + fname;\n    } else {\n      var filename =\n        params.data_dir + \"Samples/\" + fname + \"?_=\" + new Date().getTime();\n    }\n    request.open(\"GET\", filename, true);\n    request.send(null);\n    request.onreadystatechange = function () {\n      if (\n        request.readyState === 4 &&\n        (request.status === 200 || request.status === 304)\n      ) {\n        // fully loaded and ( fresh or cached )\n        all_locs = [];\n        var lines = request.responseText.split(\"\\n\");\n        for (var i = 0; i < lines.length; i++) {\n          var l = lines[i].split(\" \");\n          if (l[0] == params.num_particles) {\n            all_locs.push([]);\n            if (all_locs.length == 2) {\n              time.save_rate = l[1];\n            }\n          } else {\n            all_locs[all_locs.length - 1].push([parseFloat(l[0]),\n                                                parseFloat(l[1]),\n                                                parseFloat(l[2]),\n                                                parseFloat(l[6])]);\n          }\n        }\n        time.max = all_locs.length - 1;\n        // console.log(all_locs);\n        resolve(all_locs);\n      }\n    };\n  });\n  var output = await promise.then(function (result) {\n    return result[0];\n  });\n  return output;\n}\n\nasync function load_current_spheres(params, time, changed_higher_dim_view) {\n  return all_locs[time.frame];\n}\n\nasync function load_current_orientation(params, time, changed_higher_dim_view) {\n  console.warn(\"Rotations not implemented for MercuryDPM loader!\");\n}\n\n\n\n\n//# sourceURL=webpack://nddem/./visualise/js/loaders/mercury.js?");

/***/ })

}]);