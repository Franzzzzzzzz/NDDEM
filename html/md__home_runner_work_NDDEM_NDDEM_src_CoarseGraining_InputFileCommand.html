<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NDDEM: List of input file commands for coarse-graining (CG)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NDDEM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">List of input file commands for coarse-graining (CG) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Description</h2>
<p>Input files are in json format. In the following:</p>
<ul>
<li>double quotes are omitted when obvious</li>
<li>the syntax <code>[ xxx | yyy | zzz]</code> in the following indicates a field that contain eiher <code>xxx</code>, <code>yyy</code>, or <code>zzz</code>.</li>
</ul>
<h2>Process</h2>
<p>The actual coarse-graining is performed in 5 pass, refered as below. Each pass has a specific purpose, and not all of them are activated, it depends on the fields requested. As averages can occur between different passes, it is worth mentioning what each one is doing:</p><ol type="1">
<li>Pass 1: Calculate particle related fields, such as density, velocity etc.</li>
<li>Pass 2: Calculate fluctuating information (Kinetic stress TK in particular.</li>
<li>Pass 3: Calculate contact information, such as the Contact stress TC.</li>
<li>Pass 4: Calculate qTC and qRCn. Most commonly skipped.</li>
<li>Pass 5: Calculate derived data, such as Pressure, eigenvalues etc.</li>
</ol>
<h2>Commands</h2>
<h3>Input file description</h3>
<ul>
<li><code>file</code>: contains an array of input files to read. The input files objects contain the following fields:<ul>
<li><code>filename</code>: name of the input file</li>
<li><code>format: [liggghts | NDDEM | mercury_legacy | mercury_vtu | interactive]</code> &ndash; format of the input file. <code>interactive</code> should not be used outside an API call from NDDEM.</li>
<li><code>content: [particles | contacts | both]</code> &ndash; content type of the input file .</li>
<li><code>number</code> &ndash; Number of files (1 for single file dumped).</li>
<li><code>mapping: { ["variable": "column",]+ }</code> &ndash; Each field map a physical variable understood by CG to a column/field in the input file.</li>
</ul>
</li>
<li><code>density</code>: default density. Used if the particle mass is not available in the input file.</li>
<li><code>radius</code>: default radius. Used if the particle diameter is not available in the input file.</li>
<li><code>diameter</code>: default diameter. Used if the particle diameter is not available in the input file.</li>
<li><code>superquadric</code>: object defining the default superquadric. Must contain two fields:<ul>
<li><code>axes</code>: array of 3 values, corresponding to the x-axis, y-axis, z-axis length of the superquadric.</li>
<li><code>shape</code>: array of 3 values, corresponding to the powers in the superquadric equation: $$x^\alpha + y^\beta + z^\gamma &lt;1$$</li>
</ul>
</li>
</ul>
<h3>Defining the Coarse Graining</h3>
<ul>
<li><code>dimension</code>: number of spatial dimensions</li>
<li><code>fields</code>: array of fields to process.<ul>
<li>Recognised fields are the following: <code>RHO, I, VAVG, TC, TK, ROT, MC, MK, mC, EKT, eKT, EKR, eKR, qTC, qTK, qRC, qRK, zT, zR, RADIUS, TotalStress, Pressure, KineticPressure, ShearStress, StrainRate,VolumetricStrainRate, ShearStrainRate, RotationalVelocity, RotationalVelocityMag</code>.</li>
<li>Tensor fields can be appended with parameter to extract tensor derived quantites (eg. <code>TC.ev1</code> for the first eigenvalue of the contact stress tensor TC). The possible parameters are:<ul>
<li>Eigenvalues and eigenvectors: <code>ev1, ev2, ev3, evec1, evec2, evec3</code>.</li>
<li>Angle of the eigenvector corresponding to the largest eigenvalue: <code>evec1_theta</code>, <code>evec1_phi</code>. Angles are in degrees, the spherical coordinates are theta the angle from the z direction, phi the angle in the xy plane counted from x.</li>
<li>Invariants: <code>trace</code>, <code>pressure</code>, etc.</li>
<li>Other: <code>dzeta</code>, with $$\dzeta = \sqrt{0.5 \left ( (ev1-ev2)^2 + (ev2-ev3)^2 + (ev3-ev1)^2 \right ) } $$.</li>
</ul>
</li>
</ul>
</li>
<li><code>boxes</code>: array. Number of boxes in each dimension.</li>
<li><code>boundaries</code>: volume that is coarse-grained. Do not specify in order to process the whole simulation (if the simulation bounds are saved in the input file).</li>
<li><code>window: [Rect3D | Sphere3DIntersect | SphereNDIntersect | RectND | Hann3D | Lucy3D | Lucy3DFancyInt | LucyND | LucyND_Periodic]</code>: shape of the averaging window. <code>Rect3D</code> is a misnommer, as it is actually a sphere 3D.</li>
<li><code>window size</code>: size of the averaging window.</li>
<li><code>extra fields</code>: array of extrafield objects, to allow for computation of arbitrary fields.<ul>
<li><code>name</code>: name of the field to compute. Should be unique.</li>
<li><code>type: [Particle | Contact | Fluctuation]</code> &ndash; Type of field. <code>Particle</code> will be calculated during Pass 1, <code>Contact</code> and <code>Fluctuation</code> are not implemented as of 2022-09-26.</li>
<li><code>tensor order: [0|1|2]</code> &ndash; 0 is scalar, 1 is vector, 2 is second order tensor.</li>
</ul>
</li>
</ul>
<h3>Time handling</h3>
<ul>
<li><code>skip</code>: number of timestep to skip</li>
<li><code>max time</code>: number of timestep to process (total, including skip)</li>
<li><code>time average: [None | Intermediate | Final | Intermediate and Final | Pre pass 5 | Intermediate and pre pass 5]</code>: when to time average. <code>Intermediate</code> averages before pass 2 to better calculate the fluctuations. <code>Final</code> averages the final fields after having calculated derived fields. <code>Pre pass 5</code> perform the average first, and then calculate the derived fields. <br  />
</li>
<li><code>savefile</code>: name of the final file (no extension)</li>
<li><code>saveformat: [mat | vtk | numpy | netCDF]</code>: output file format. Can be an array for multiple output format at once. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
